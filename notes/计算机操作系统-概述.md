# 基本特征

## 1. 并发并行

并发是指**宏观**上在**一段时间**内能同时运行多个程序，而**并行**则**同一时刻**能运行多个指令。

并行需要硬件支持，如多流水线，多核处理器或者分布式计算系统

操作系统引入**进程**和**线程**，使得程序具有并发运行

## 2. 共享

共享是指系统中的资源可以被多个并发的**进程共同使用**。

有**两种共享**方式：**同时**共享和**互斥**共享

互斥共享的资源称为**临界资源**，例如打印机等，在同一时刻中只允需一进程进行使用，需要用同步机制实现互斥访问。

## 3. 虚拟

虚拟技术把一个物理实体转化为多个逻辑实体。

主要虚拟技术有两种：**时（时间）分复用**技术**空（空间）分复用**技术。

多个进程能在同一个处理器上并发执行使用了**时分复用技术**，让每一个进程轮流使用处理器，每次执行一小段时间片并快速切换。

虚拟内存使用了**空分复用技术**，他将物理内存抽象成地址空间，每个进程都有各自的地址空间。地址空间的页被映射到物理内存，地址空间页并不需要全部在物理内存上，当使用到一个没有物理内存的页时，执行页面置换算法，将该页面换到内存中。

## 4. 异步

异步是指进程不是一次性执行完，而是**走走停停**，以不知的速度向前推进。

# 基本功能

## 1. 进程管理

进程控制、进程同步、进程通信、死锁处理、处理机器调度等。

## 2. 内存管理

内存分布、地址映射、内存保护与共享、虚拟内存等。

## 3. 文件管理

文件存储空间的管理、目录管理、文件读写管理和保护的等。

## 4. 设备管理

完成用户的I/O请求，方便用户使用各种设备，并提高设备的利用率。

主要包括缓冲管理、设备分配、设备处理、虚拟设备等。

# 系统调用

如果一个进程在用户态需要使用内核态的功能呢，就要进程系统调用从而陷入内核，有操作系统代为完成。

<div align="center"> <img src="http://test-fangsong-imgsubmit.oss-cn-beijing.aliyuncs.com/img/image-20201028232844254.png" width="600"/> </div><br>

<div align="center"> <img src="http://test-fangsong-imgsubmit.oss-cn-beijing.aliyuncs.com/img/image-20201028234218224.png" width="600"/> </div><br>

Linux 的系统调用主要有以下这些：

|   Task   |          Commands          |
| :------: | :------------------------: |
| 进程控制 |   fork();exit();wait();    |
| 进程通信 |  pipe();shmget();mmap();   |
| 文件操作 |   open();read();write();   |
| 设备操作 |  ioctl();read();write();   |
| 信息维护 | getpid();alarm(); slepp(); |
|   安全   |  chomd();umask();chown();  |

# 大内核和微内核

## 1. 大内核

大内是将操作系统功能作为一个紧密结合的整体放到内核中。

由于各个模块共享信息，因此由很高的性能。

## 2. 微内核

由于操作系统不断复杂，因此将一部分操作系统功能移除内核，从而降低内核的复杂性。移除的部分根据分层的原则划分为若干服务，相互独立。

在微内核结构下，操作系统被划分为小的，定义良好的模块，只有为微内核着一个模块运行在内核态，其余运行在用户态。 

因为在内核态与用户态要进行频繁的切换，所以会有一些性能损失。

<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/2_14_microkernelArchitecture.jpg"/> </div><br>

<div align="center"> <img src="http://test-fangsong-imgsubmit.oss-cn-beijing.aliyuncs.com/img/image-20201029001811022.png"/> </div><br>

# 中断分类

## 1. 外中断

由CPU执行指令以外的事件引起的，如I/O完成中断，表示输入输出处理已经完成，处理器能够发送下一个输入输出请求。此外还有时钟中断、控制台中断等。

## 2. 异常

由CPU执行指令的内部事件引起，如非法操作码、地址越界、算术溢出等。

## 3. 陷入

在用户程序中使用系统调用。